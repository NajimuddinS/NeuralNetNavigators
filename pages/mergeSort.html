<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Merge Sort Visualizer</title>
  <link rel="stylesheet" href="../styles/style.css">
   <link rel="stylesheet" href="../styles/bs.min.css">
</head>
<style>
    .card-footer{
      padding-top:15px ;
      border-radius: 15px;
    }
    .row1{
      margin: auto;
    }

    .input-group-append{
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      margin: auto;
    }
    .fbtns{
      display: flex;
    }

    
    .container {
        text-align: center;
        width: 80%;
        max-width: 600px;
        background: white;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
    }

    button {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
    }

    #visualizer {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      width: 100%;
      margin-top: 20px;
    }

    #message {
      font-size: 18px;
      color: #2ecc71;
      margin-top: 20px;
      display: none;
      text-align: center;
      font-family: 'Courier New', Courier, monospace;
      font-weight: 700;
    }

    .array-element {
      width: 50px;
      height: 50px;
      border-radius: 5px;
      background-color: #0051ff;
      color: rgb(255, 255, 255);
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 5px;
      font-size: 18px;
      font-weight: 700;
      font-family: 'Courier New', Courier, monospace;
      transition: transform 0.5s ease, background-color 0.5s ease;
    }

    .swapping {
      background-color: #ff260e;
      color: #000;
      transform: scale(1.2);
    }

    .comparing {
      background-color: #ffce0c;
      color: #000;
    }

    .sorted {
      background-color: #00ff6a;
      color: #000;
    }

.keyboard {
    padding: 20px;
    display: grid;
    grid-template-rows: auto;
    flex-direction: column;
    justify-items: center;
    align-items: center;
    background-color: #CFC19A;
    border-radius: 25px;
    border: 5px solid #B9AB84;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.8), inset 0 5px 10px rgba(255, 255, 255, 0.1);
    /* width: 350px; */
    }

    .key {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      -ms-appearance: none;
      -khtml-appearance: none;
      box-sizing: initial;
      border: none;
      cursor: pointer;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      margin: 20px 5px;
      position: relative;
      width: 250px;
      height: 19px;
      padding: 31px 17px;
      border-radius: 10px;
      overflow: hidden;
      /* TEXT */
      text-align: center;
      font: bold 20px arial, sans-serif;
      color: #968f84;
      transition: box-shadow 0.02s cubic-bezier(0.79, 0.03, 0.43, 1);
      box-shadow: inset 0px 0px 0px 0px #44413c, 0px 0px 0px 1.5px #44413c,
        0px 16px 12px 0px #504d471f;
        z-index: 3;
    }
    .key:active {
      transition: box-shadow 0.1s cubic-bezier(0, 0, 0, 1);
      /* width: 250px; */
      box-shadow: inset 0px 0px 6px 0px #44413c, 0px 0px 0px 1.5px #44413c,
        0px 10px 12px 0px #504d471f;
    }
    .key:active::before {
      background: linear-gradient(0deg, #dddad3, #b6b0a2);
      transition: transform 0.1s cubic-bezier(0, 0, 0, 1),
        background 0.1s cubic-bezier(0, 0, 0, 1);
    }
    .key::before {
      left: 10px;
      top: 12px;
      border-radius: 7px;
      box-shadow: 0px -1px 0px 0px #dedcdc, 0px 2px 0px 0px #9a948c;
      content: "";
      position: absolute;
      z-index: -1;
      width: 265px;
      height: 60px;
      transition: transform 0.01s cubic-bezier(0.79, 0.03, 0.43, 1),
        background 0.02s cubic-bezier(0.79, 0.03, 0.43, 1);
      background: linear-gradient(0deg, #e3e0d9, #c4bfb4);
    }
    .key::after {
      width: 285px;
      left: 0;
      top: 0;
      z-index: -2;
      position: absolute;
      content: "";
      filter: blur(1px);
      border-top: 40px solid #e9e6e0;
      border-bottom: 42px solid #999286;
      border-left: 40px solid #cdc8be;
      border-right: 40px solid #cdc8be;
    }

    .info{
      margin-top: 25px;
      background: #CFC19A; 
      width: 900px;
      height: 500px;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.8), inset 0 5px 10px rgba(255, 255, 255, 0.1);
    }


    .cards_item {
      display: flex;
      padding: 1rem;
    }

    .card_image {
      height: calc(13*1.2rem);
      padding: 1.2rem 1.2rem 0;
      position:relative;
    }
    .card_image:before,
    .card_image:after{
      content: "";
      position: absolute;
      width: 20px;
      left: 60%;
      top: 0;
      height: 45px;
      background: #e6e6e6b8;
      transform: rotate(45deg);
    }
    .card_image:after{
      transform: rotate(-45deg);
      top:auto;
      bottom:-22px;
      left:40%;
    }
    .card_image img {
      width:100%;
      height:100%;
      object-fit:cover;
    }

    .cards_item {
      filter:drop-shadow(0 0 5px rgba(0, 0, 0, 0.25));
    }

    .card {
      background-color: white;
      border-radius: 0.25rem;
      display: flex;
      height: 460px;
      flex-direction: column;
      overflow: hidden;
      padding-left: 30px;
      background: repeating-linear-gradient(#0000 0 calc(1.2rem - 1px),#66afe1 0 1.2rem) right bottom /100% 100%,linear-gradient(red 0 0) 30px 0/2px 100% #fff;
      background-repeat: no-repeat;
      line-height: 1.2rem;
      -webkit-mask:radial-gradient(circle .8rem at 2px 50%,#0000 98%,#000)0 0/100% 2.4rem;
    }

    .card_content {
      padding: 0.9rem;
    }

    h2.card_title,p {
      margin: 1.2rem 0;
    }
    h2.card_title {
        font-size: 1.3em;
        font-family: 'Sofia Sans', sans-serif;
        font-weight: bolder;
    }
    .P_container{
      display: flex;
      flex-direction: column;
      /* gap:25px; */
    }

</style>
<body>
  <div class="root">
    <div class="keyboard">
        <a style="text-decoration: none;" href="./Bubble.html"><div class="key">Bubble Sort</div></a>
        <a style="text-decoration: none;" href="./selection.html"><div class="key">Selection Sort</div></a>
        <a style="text-decoration: none;" href="./insertionsort.html"><div class="key">Insertion Sort</div></a>
        <a style="text-decoration: none;" href="./mergeSort.html"><div class="key">Merge Sort</div></a>
        <div class="key">Quick Sort</div>
        <a style="text-decoration: none;" href="./heap.html"><div class="key">Heap</div></a>
        <a style="text-decoration: none;" href="./stack.html"><div class="key">Stack</div></a>
        <a style="text-decoration: none;" href="./queue.html"><div class="key">Queue</div></a>
        <div class="key">Sliding Window</div>
        <a style="text-decoration: none;" href="./binarysearch.html"><div class="key">Binary Search</div></a>
        <div class="key">Two Pointers</div>
        <div class="key">Linked List</div>
  </div>
  <div class="P_container">
    <main class="computerContainer">
      <section class="screenContainer">
        <div class="screenFrame">
          <div class="screen">
            <div class="terminal">
              <div class="outputContainer">
                <!-- Screen -->
              </div>

              <div class="mergescreen">
              <div id="visualizer"></div>
              <div id="message">Array is sorted!</div>
            </div>
             
          </div>
        </div>
      </section>
      <div class="card-footer">
        <div class="input-group">

          <div class="input-group-append">
            <input type="text" id="array-input" class="form-control" placeholder="Enter" required>
              <button type="submit" class="btn button" onclick="enterArray()">
                <div class="button-top-push">Enter</div>
                <div class="button-bottom-push"></div>
                <div class="button-base-push"></div>
              </button>
              <span style="width: 10px;"> </span>
              <button type="button" id="sortBtn" class="btn button" onclick="mergeSortHandler()">
                <div class="button-top-empty">Sort</div>
                <div class="button-bottom-empty"></div>
                <div class="button-base-empty"></div>
              </button>
              <span style="width: 10px;"> </span>
              <button type="button" id="clearBtn" class="btn button" onclick="clearArray()">
                <div class="button-top">Clear</div>
                <div class="button-bottom"></div>
                <div class="button-base"></div>
              </button>
              
          </div>
        <div style="display: flex;align-items: center;margin: auto;padding: 20px 0 20px 0;gap: 20px;">
        </div>

      </div>
      <section class="bodyDecor">
        <div class="floppyDriveContainer">
          <div class="floppyDrive">
            <div class="floppyShade"></div>
            <div class="floppyShadeDarker"></div>
            <div class="floppySlot"></div>
          </div>
        </div>
        <div class="logoContainer">
          <div class="logo"></div>
        </div>
      </section>
      <section class="bottomDecor">
        <div class="bottomButton"></div>
      </section>
    </main>
  
    <div class="info">
      <li class="cards_item">
        <div class="card">
          <div class="card_content">
            <h2 class="card_title">Merge Sort</h2>
            <div style="font-family: 'Sofia Sans', sans-serif;" class="card_text">
              <p>Merge Sort is a divide-and-conquer sorting algorithm that splits the input list into two halves, recursively sorts each half, and then merges the sorted halves back together. This process continues until the entire list is sorted.</p>
              <p style="font-weight: bold;">Time Complexity:</p>
              <p>Best Case: O(n log n) (due to the division of the list)</p>
              <p>Average Case: O(n log n)</p>
              <p>Worst Case: O(n log n)</p>
              <p style="font-weight: bold;">Space Complexity:</p>
              <p>O(n) (requires additional space for the temporary arrays used during merging)</p>
              <p>Merge Sort is efficient for large datasets and guarantees O(n log n) time complexity regardless of the initial order of elements. However, its additional space requirement makes it less memory efficient than in-place algorithms.</p>
            </div>
          </div>
        </div>
      </li>
    </div>
  </div>
  </div>
  <div style="height: 100px;">
  </div>
  


</body>
  <script>
    let array = [];

function enterArray() {
  const inputValue = document.getElementById('array-input').value;
  array = inputValue.split(',').map(Number);
  displayArray();
  document.getElementById('message').style.display = 'none'; // Hide message
}

function displayArray() {
  const visualizer = document.getElementById('visualizer');
  visualizer.innerHTML = '';
  array.forEach(value => {
    const div = document.createElement('div');
    div.classList.add('array-element');
    div.textContent = value;
    visualizer.appendChild(div);
  });
}

function clearArray() {
  array = [];
  document.getElementById('array-input').value = '';
  document.getElementById('visualizer').innerHTML = '';
  document.getElementById('message').style.display = 'none'; // Hide message
}

function swapAnimation(element1, element2) {
  return new Promise(resolve => {
    element1.classList.add('swapping');
    element2.classList.add('swapping');

    setTimeout(() => {
      element1.classList.remove('swapping');
      element2.classList.remove('swapping');
      resolve();
    }, 500);
  });
}

function compareAnimation(element1, element2) {
  return new Promise(resolve => {
    element1.classList.add('comparing');
    element2.classList.add('comparing');

    setTimeout(() => {
      element1.classList.remove('comparing');
      element2.classList.remove('comparing');
      resolve();
    }, 500);
  });
}

async function mergeSortHandler() {
  await mergeSort(array, 0, array.length - 1);
  document.getElementById('message').style.display = 'block'; // Show message after sorting
}

async function mergeSort(arr, left, right) {
  if (left >= right) return;

  const mid = Math.floor((left + right) / 2);
  await mergeSort(arr, left, mid);
  await mergeSort(arr, mid + 1, right);
  await merge(arr, left, mid, right);
}

async function merge(arr, left, mid, right) {
  const leftArr = arr.slice(left, mid + 1);
  const rightArr = arr.slice(mid + 1, right + 1);

  let i = 0, j = 0, k = left;
  const elements = document.getElementsByClassName('array-element');

  while (i < leftArr.length && j < rightArr.length) {
    await compareAnimation(elements[k], elements[mid + 1 + j]);

    if (leftArr[i] <= rightArr[j]) {
      arr[k] = leftArr[i];
      elements[k].textContent = leftArr[i];
      i++;
    } else {
      arr[k] = rightArr[j];
      elements[k].textContent = rightArr[j];
      j++;
    }

    elements[k].classList.add('sorted'); // Add sorted class to turn it green
    await swapAnimation(elements[k], elements[k]);
    k++;
  }

  while (i < leftArr.length) {
    arr[k] = leftArr[i];
    elements[k].textContent = leftArr[i];
    elements[k].classList.add('sorted'); // Add sorted class for remaining elements
    await swapAnimation(elements[k], elements[k]);
    i++;
    k++;
  }

  while (j < rightArr.length) {
    arr[k] = rightArr[j];
    elements[k].textContent = rightArr[j];
    elements[k].classList.add('sorted'); // Add sorted class for remaining elements
    await swapAnimation(elements[k], elements[k]);
    j++;
    k++;
  }
}

  </script>
</html>


